% Get data from .mat

ext='.mat';
enh=['enhanced' ext];
raw=['raw' ext];

ENH=1;
RAW=2;

to_show_data=zeros(7204,51,2);
to_show_data_mean=zeros(51,2);
to_show_data_std=zeros(51,2);


for qp=1:51
    file_name_enh = ['QP' num2str(qp) '_' enh];
    file_name_raw = ['QP' num2str(qp) '_' raw];
    
    if isfile(file_name_enh) && isfile(file_name_raw)
        load(file_name_enh)
        to_show_data(:,qp,ENH)=results_NR;
        to_show_data_mean(qp,ENH) = mean(results_NR);
        to_show_data_std(qp,ENH) = std(results_NR);
        load(file_name_raw)
        to_show_data(:,qp,RAW)=results_NR;
        to_show_data_mean(qp,RAW) = mean(results_NR);
        to_show_data_std(qp,RAW) = std(results_NR);
    end
end

%to_show_data_mean(to_show_data_mean==0)=NaN;
to_show_data_mean(:,ENH)=inpaint_nans(to_show_data_mean(:,ENH));
to_show_data_mean(:,RAW)=inpaint_nans(to_show_data_mean(:,RAW));


close all
figure
subplot(3,2,1)
stem(to_show_data_mean(:,ENH)-to_show_data_mean(:,RAW),'b')
xlim([29,49])
title ('Mean PSNR imporvement')
xlabel ('QP')
ylabel ('PSNR_{Enhanced}-PSNR_{RAW}')

subplot(3,2,2)
stem(to_show_data_std(:,ENH),'b')
hold on

xlim([29,49])
title ('Standard Deviation PSNR imporvement')
xlabel ('QP')
ylabel ('PSNR_{Enhanced}-PSNR_{RAW}')

subplot(3,1,2)
hist(to_show_data(:,30,ENH),200)
xlim([25,42])
title ('Enhanced PSNR Distribution for QP=30')
xlabel ('PSNR')

subplot(3,1,3)
hist(to_show_data(:,30,RAW),200)
xlim([25,42])
title ('RAW PSNR Distribution for QP=30')
xlabel ('PSNR')



